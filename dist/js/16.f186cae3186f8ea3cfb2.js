webpackJsonp([16],{395:function(t,n,s){function e(t){s(537)}var i=s(240)(s(495),s(587),e,null,null);t.exports=i.exports},414:function(t,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default={name:"fab",data:function(){return{hideFrom:["login","sync"]}},methods:{click:function(t){this.$router.push({name:t})}}}},415:function(t,n,s){n=t.exports=s(390)(void 0),n.push([t.i,".q-fab{z-index:1000!important}",""])},416:function(t,n,s){var e=s(415);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s(391)("c80c07c0",e,!0)},417:function(t,n,s){function e(t){s(416)}var i=s(240)(s(414),s(418),e,null,null);t.exports=i.exports},418:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("q-fab",{staticClass:"absolute-bottom-right",attrs:{classNames:"secondary",icon:"keyboard_arrow_left",direction:"left"}},[s("q-small-fab",{staticClass:"negative",attrs:{icon:"power_settings_new"},nativeOn:{click:function(n){t.click("logout")}}}),t._v(" "),s("q-small-fab",{staticClass:"primary",attrs:{icon:"home"},nativeOn:{click:function(n){t.click("dashboard")}}}),t._v(" "),s("q-small-fab",{staticClass:"primary",attrs:{icon:"settings"},nativeOn:{click:function(n){t.click("admin")}}}),t._v(" "),this.$store.getters.isOnline?s("q-small-fab",{staticClass:"info",attrs:{icon:"cloud"},nativeOn:{click:function(n){t.click("sync")}}}):t._e(),t._v(" "),this.$store.getters.isOnline?t._e():s("q-small-fab",{staticClass:"info disabled",attrs:{icon:"cloud_off"}})],1)},staticRenderFns:[]}},495:function(t,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=s(417),i=s.n(e),a=s(20);s.n(a);n.default={name:"dashboard",data:function(){return{jobs:[],inspections:[],companyNames:{},locationNames:{},assetNames:{},answers:{},answerCount:{},answered:{}}},components:{fab:i.a},computed:{uniqueInspections:function(){var t={ids:[],appIds:[]};return this.inspections.filter(function(n,s){var e=t.appIds.includes(n.id),i=t.appIds.includes(n.appGeneratedID);return t.ids.push(n.id),t.appIds.push(n.appGeneratedID),!e&&!i})},uniqueJobs:function(){var t=[];return this.jobs.filter(function(n,s){var e=t.includes(n.id);return t.push(n.id),!e})}},created:function(){var t=this;a.Events.$on("sync:complete",function(){t.$forceUpdate()}),setTimeout(function(){t.$forceUpdate()},4e3),this.$store.dispatch("fetchItems",{name:"jobs"}).then(function(n){t.jobs=n}),this.$store.dispatch("fetchItems",{name:"inspections"}).then(function(n){t.inspections=n,t.inspections=t.inspections.sort(function(t,n){return t.id<n.id?-1:t.id>n.id?1:0}),n.forEach(function(n){t.$store.dispatch("fetchItem",{type:"assets",lookup:"id",value:n.assetid,field:"name"}).then(function(s){t.$set(t.assetNames,n.assetid,s),t.$store.dispatch("fetchItems",{name:"answers",lookup:"inspectionid",value:n.id,field:"*"}).then(function(s){var e=[];s=s.filter(function(t){var n=!e.includes(t.questionid);return e.push(t.questionid),n}),t.$set(t.answers,n.id,s),t.$set(t.answerCount,n.id,s.length);var i=0;s.forEach(function(t){t.answer&&(t.answer.content||t.answer.signatures)&&(i+=1)}),t.$set(t.answered,n.id,i)})})}),t.$store.dispatch("fetchItems",{name:"companies"}).then(function(n){n.forEach(function(n){t.$set(t.companyNames,n.id,n.name)})}),t.$store.dispatch("fetchItems",{name:"locations"}).then(function(n){n.forEach(function(n){t.$set(t.locationNames,n.id,n.name)})})})},methods:{goInspection:function(t){this.$router.push({name:"inspection",params:{id:t}})},goHosesInspection:function(t){this.$router.push({name:"hoseInspections",params:{jobid:t}})},addInspection:function(t){this.$router.push({name:"addinspection",params:{jobid:t}})}}}},518:function(t,n,s){n=t.exports=s(390)(void 0),n.push([t.i,":root{--color:#333}.add-inspection{margin:8px}",""])},537:function(t,n,s){var e=s(518);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);s(391)("5f7b63b7",e,!0)},587:function(t,n){t.exports={render:function(){var t=this,n=t.$createElement,s=t._self._c||n;return s("div",{attrs:{id:"dashboard"}},[s("fab"),t._v(" "),s("div",{staticClass:"list"},[t._l(t.uniqueJobs,function(n){return[s("div",{staticClass:"list-label"},[t._v("Job: "+t._s(n.id)+" "),n.externalEpicorJobID?s("span",[t._v("("+t._s(n.externalEpicorJobID)+")")]):t._e(),t._v(" "),s("button",{staticClass:"secondary small circular float-right add-inspection",on:{click:function(s){t.addInspection(n.id)}}},[s("i",[t._v("add")])])]),t._v(" "),s("div",[t._l(t.uniqueInspections,function(e){return e.jobid===n.id?[s("div",{staticClass:"item three-lines",on:{click:function(n){t.goInspection(e.id)}}},[s("div",{staticClass:"item-content inset has-secondary"},[s("div",[t._v(t._s(t.assetNames[e.assetid])+" @ "+t._s(t.locationNames[e.locationid]))]),t._v(" "),s("div",[s("span",[t._v("Company: "+t._s(t.companyNames[e.companyid]))]),t._v("\n\t\t\t\t\t\t\t\t"+t._s(t._f("timeAgo")(n.inspectedAt))+" ("+t._s(t._f("dateOnly")(n.inspectedAt))+")\n\t\t\t\t\t\t\t")])]),t._v(" "),s("div",{staticClass:"item-secondary stamp"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.answered[e.id])+" / "+t._s(t.answerCount[e.id])+"\n\t\t\t\t\t\t")])]),t._v(" "),s("hr",{staticClass:"inset"})]:t._e()})],2),t._v(" "),s("hr")]}),t._v(" "),0===t.jobs.length?s("div",{staticClass:"list-label"},[t._v("\n\t\t\tThere are currently no jobs available. You can add new jobs from the admin backend. "),s("br")]):t._e()],2)],1)},staticRenderFns:[]}}});